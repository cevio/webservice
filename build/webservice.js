!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.webService=t():e.webService=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(9),o=n(4),i=n(5),s=n(3),a=n(6),u=n(7),p=e.exports=function(e){var t=new s,n=r.createServer();return t.http=n,n.namespace="webservice",n.defineFreeze("browser",t),Object.defineProperty(n.request,"$data",p.defineParse(n)),Object.defineProperty(n.request,"$head",p.defineHead(n)),p.listen(e,n),a(n,t),e.component("webhead",i(t)),e.component("webview",o(t)),e.directive("so-href",u(e,n)),n};p.listen=function(e,t){var n=t.listen.bind(t);t.listen=function(r){e.bootstrap(r,t.browser.data),setTimeout(function(){t.browser.animate&&t.browser.animate(t.browser),n()},0)}},p.defineParse=function(e){return{set:function(){throw new Error("you can not set req.$data")},get:function(){return e.browser.scope}}},p.defineHead=function(e){return{set:function(){throw new Error("you can not set req.$head")},get:function(){return e.browser.headbar}}},p.engineAnimate=n(13)},function(e,t,n){(function(e,r){function o(e,t){this._id=e,this._clearFn=t}var i=n(2).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},p=0;t.setTimeout=function(){return new o(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=p++,r=arguments.length<2?!1:a.call(arguments,1);return u[n]=!0,i(function(){u[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(t,n(1).setImmediate,n(1).clearImmediate)},function(e,t){function n(){p=!1,s.length?u=s.concat(u):c=-1,u.length&&r()}function r(){if(!p){var e=setTimeout(n);p=!0;for(var t=u.length;t;){for(s=u,u=[];++c<t;)s&&s[c].run();c=-1,t=u.length}s=null,p=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var s,a=e.exports={},u=[],p=!1,c=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new o(e,t)),1!==u.length||p||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=i,a.addListener=i,a.once=i,a.off=i,a.removeListener=i,a.removeAllListeners=i,a.emit=i,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(8).EventEmitter,o=e.exports=function(){this.views={},this.data={global:{},header:{leftHTML:"",rightHTML:"",title:"Welcome",leftClick:function(){},rightClick:function(){},hide:!1}},this.current=null,this.target=null,this.animate=null,Object.defineProperty(this,"scope",{set:function(e){this.data.global=e},get:function(){return this.data.global}}),Object.defineProperty(this,"headbar",{set:function(e){this.data.header=e},get:function(){return this.data.header}}),Object.defineProperty(this,"engine",{get:function(){return this.animate},set:function(e){this.animate=e}})};o.prototype=r.prototype,o.prototype.dispatch=function(e,t){this.current=e,this.target=t},o.prototype.exchange=function(){this.current=this.target,this.target=null,this.http.history=null}},function(e,t){"use strict";function n(e){return this.wrapname=this.virtualDom.getAttribute("name"),'<div class="webview hide"><section>'+e+"</section></div>"}function r(e){return function(){for(var t=0;t<this.element.childNodes.length;t++)if(1===this.element.childNodes[t].nodeType){this.wraproot=this.element.childNodes[t];break}e.views[this.wrapname]=this}}e.exports=function(e){return{props:["data"],events:{wrapTemplate:n,init:r(e)}}}},function(e,t){"use strict";e.exports=function(e){return{props:["menu"],template:'<div class="webview-header {{menu.hide?\'hide\':\'\'}}"><div class="webview-header-outer"><div class="webview-header-inner"><div class="clearfix"><div class="left-btn pull-left" so-html="{{menu.leftHTML}}" so-on="click:menu.leftClick(this)"></div><div class="right-btn pull-right" so-html="{{menu.rightHTML}}" so-on="click:menu.rightClick(this)"></div><div class="webtitle">{{menu.title}}</div></div></div></div></div>',events:{init:function(){this.wraproot=this.element.childNodes[0],this.wrapinner=this.wraproot.querySelector(".webview-header-outer"),e._headbar=this}}}}},function(e,t){"use strict";function n(e,t){return function(r){var o=t.views[r];if(!o)return t.emit("renderError",new Error("template of "+r+" is not exist"));var i=t.current;t.dispatch(i,o),t.engine?t.emit(e.history,t,e):n.engine(t,e)}}e.exports=function(e,t){e.response.defineFreeze("render",n(e,t))},n.engine=function(e,t){var n=e.current,r=e.target;n&&n.wraproot.setAttribute("class","webview hide"),r&&r.wraproot.setAttribute("class","webview"),e.emit(t.history,e),e.exchange()}},function(e,t){"use strict";e.exports=function(e,t){function n(e){this.value!==e&&(this.value=e)}function r(e){return function(){t.response.redirect(e.value)}}return function(t,o,i){var s=e.util.formatExpression(t.nodeValue),a=new e.nodeStructor(o,s);return a.parent=i,a.set=n,o.addEventListener("click",r(a),!1),o.removeAttribute("so-href"),a}}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,a,u,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),u=1;o>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(i(n)){for(o=arguments.length,a=new Array(o-1),u=1;o>u;u++)a[u-1]=arguments[u];for(p=n.slice(),o=p.length,u=0;o>u;u++)p[u].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned){var o;o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t,n,r){return this.stacks.push(new p(e,t,n,r)),this}function o(e){function t(u){if(u&&"route"===u)return e();var p=a[n++];if(!p)return e(u);var c=p.match(i);if(c)if(r.params=p.params,"use"===p.method)u?p.handle_error(u,r,o,t):p.handle_request(r,o,t);else if(s===p.method)"load"===s?(s="active",u?p.handle_error(u,r,o,t):(p.handle_request(r,o),t())):u?p.handle_error(u,r,o,t):(p.handle_request(r,o),t("route"));else{if("active"===p.method&&"load"===s){var l=e;e=function(){u?p.handle_error(u,r,o,t):p.handle_request(r,o),l()}}t(u)}else t(u)}var n=0,r=this.request,o=this.response,i=r.path,s=r.method,a=this.stacks;return e||(e=function(){}),0===a.length?e():void t()}function i(){var e=this,t=this.namespace+"-history",n=this.request.session[t]||"[]",r=this.request.href;n=JSON.parse(n),this.history="goahead",history.replaceState({url:r},document.title,"#"+r),-1===n.indexOf(r)&&(n.push(r),this.response.session.set(t,n)),this.match(function(){e.emit("ready",e.request,e.response),s(e.response)})}function s(e){window.addEventListener("popstate",function(t){t.state&&e.redirect(t.state.url)},!1)}var a=n(6),u=n(7),p=n(5),c=n(1),l=n(9).EventEmitter,f=e.exports=function(){this.request=new a,this.response=new u,this.namespace="http",c.defineFreeze(this.request,"http",this),c.defineFreeze(this.response,"http",this),c.defineFreeze(this,"define",function(e,t){c.define(this,e,t)}),c.defineFreeze(this,"defineFreeze",function(e,t){c.defineFreeze(this,e,t)}),this.handle()};f.prototype=l.prototype,f.prototype.handle=function(){this.caseSensitive=!1,this.defineFreeze("stacks",[]),this.defineFreeze("push",r),this.defineFreeze("match",o),this.define("listen",i),this.defineFreeze("looser",{sensitive:this.caseSensitive,strict:!1,end:!1}),this.defineFreeze("strict",{sensitive:this.caseSensitive,strict:!0,end:!0})},f.prototype.use=function(e,t){return"function"==typeof e&&(t=e,e="/"),this.push("use",e,this.looser,t)},f.prototype.load=function(e,t){return"function"==typeof e&&(t=e,e="/"),this.push("load",e,this.strict,t)},f.prototype.active=function(e,t){return"function"==typeof e&&(t=e,e="/"),this.push("active",e,this.strict,t)},f.request=a,f.response=u,f.createServer=function(e){var t=new f;return"function"==typeof e&&e(t.request,t.response),t}},function(e,t){"use strict";t.define=function(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})},t.defineFreeze=function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!1,configurable:!1})}},function(e,t,n){var r,o;!function(i){r=i,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o))}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,o,i){var s;if(arguments.length>1){if(i=e({path:"/"},r.defaults,i),"number"==typeof i.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(u){}return o=encodeURIComponent(String(o)),o=o.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",o,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}t||(s={});for(var p=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,l=0;l<p.length;l++){var f=p[l].split("="),h=f[0].replace(c,decodeURIComponent),d=f.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{if(d=n&&n(d,h)||d.replace(c,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(u){}if(t===h){s=d;break}t||(s[h]=d)}catch(u){}}return s}return r.get=r.set=r,r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t()})},function(e,t,n){var r=n(13);t.format=function(e,t){if(e&&e.length){var n={};return e.split("&").forEach(function(e){var o,i,s=e.indexOf("=");s>-1?(o=e.substring(0,s),i=e.substring(s+1)):(o=e,i=""),t&&(i=decodeURIComponent(i)),void 0!==n[o]?r.type(n[o],"Array")?-1===n[o].indexOf(i)&&n[o].push(i):n[o]!==i&&(n[o]=[n[o]],n[o].push(i)):n[o]=i}),n}return{}},t.toString=function(e,t){var n=[];for(var r in e)n.push(r+"="+(t?encodeURIComponent(e[r]):e[r]));return n.join("&")}},function(e,t,n){"use strict";function r(e,t,n){return!0}function o(e,t,n,o){return e.global?r(t||b,n,o):void 0}function i(e){e.global&&0===S.active++&&o(e,null,"ajaxStart")}function s(e){e.global&&!--S.active&&o(e,null,"ajaxStop")}function a(e,t){var n=t.context;return t.beforeSend.call(n,e,t)===!1||o(t,n,"ajaxBeforeSend",[e,t])===!1?!1:void o(t,n,"ajaxSend",[e,t])}function u(e,t,n){var r=n.context,i="success";n.success.call(r,e,i,t),o(n,r,"ajaxSuccess",[t,n,e]),c(i,t,n)}function p(e,t,n,r){var i=r.context;r.error.call(i,n,t,e),o(r,i,"ajaxError",[n,r,e]),c(t,n,r)}function c(e,t,n){var r=n.context;n.complete.call(r,t,e),o(n,r,"ajaxComplete",[t,n]),s(n)}function l(){}function f(e){return e&&(e==E?"html":e==C?"json":x.test(e)?"script":T.test(e)&&"xml")||"text"}function h(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function d(e){"object"===F(e.data)&&(e.data=m(e.data)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=h(e.url,e.data))}function v(e,t,n,r){var o="array"===F(t);for(var i in t){var s=t[i];r&&(i=n?r:r+"["+(o?"":i)+"]"),!r&&o?e.add(s.name,s.value):(n?"array"===F(s):"object"===F(s))?v(e,s,n,i):e.add(i,s)}}function m(e,t){var n=[];return n.add=function(e,t){this.push(A(e)+"="+A(t))},v(n,e,t),n.join("&").replace("%20","+")}function g(e){var t=Array.prototype.slice;return t.call(arguments,1).forEach(function(t){for(y in t)void 0!==t[y]&&(e[y]=t[y])}),e}var y,w,_=0,b=window.document,x=/^(?:text|application)\/javascript/i,T=/^(?:text|application)\/xml/i,C="application/json",E="text/html",L=/^\s*$/,F=n(14),S=e.exports=function(e){var t=g({},e||{});for(y in S.settings)void 0===t[y]&&(t[y]=S.settings[y]);i(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!=window.location.host);var n=t.dataType,r=/=\?/.test(t.url);if("jsonp"==n||r)return r||(t.url=h(t.url,"callback=?")),S.JSONP(t);t.url||(t.url=window.location.toString()),d(t);var o,s=t.accepts[n],c={},v=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:window.location.protocol,m=S.settings.xhr();t.crossDomain||(c["X-Requested-With"]="XMLHttpRequest"),s&&(c.Accept=s,s.indexOf(",")>-1&&(s=s.split(",",2)[0]),m.overrideMimeType&&m.overrideMimeType(s)),(t.contentType||t.data&&"GET"!=t.type.toUpperCase())&&(c["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),t.headers=g(c,t.headers||{}),m.onreadystatechange=function(){if(4==m.readyState){clearTimeout(o);var e,r=!1;if(m.status>=200&&m.status<300||304==m.status||0==m.status&&"file:"==v){n=n||f(m.getResponseHeader("content-type")),e=m.responseText;try{"script"==n?(1,eval)(e):"xml"==n?e=m.responseXML:"json"==n&&(e=L.test(e)?null:JSON.parse(e))}catch(i){r=i}r?p(r,"parsererror",m,t):u(e,m,t)}else p(null,"error",m,t)}};var _="async"in t?t.async:!0;m.open(t.type,t.url,_);for(w in t.headers)m.setRequestHeader(w,t.headers[w]);return a(m,t)===!1?(m.abort(),!1):(t.timeout>0&&(o=setTimeout(function(){m.onreadystatechange=l,m.abort(),p(null,"timeout",m,t)},t.timeout)),m.send(t.data?t.data:null),m)};S.active=0,S.JSONP=function(e){if(!("type"in e))return S(e);var t,n="jsonp"+ ++_,r=b.createElement("script"),o=function(){n in window&&(window[n]=l),c("abort",i,e)},i={abort:o},s=b.getElementsByTagName("head")[0]||b.documentElement;return e.error&&(r.onerror=function(){i.abort(),e.error()}),window[n]=function(r){clearTimeout(t),delete window[n],u(r,i,e)},d(e),r.src=e.url.replace(/=\?/,"="+n),s.insertBefore(r,s.firstChild),e.timeout>0&&(t=setTimeout(function(){i.abort(),c("timeout",i,e)},e.timeout)),i},S.settings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:C,xml:"application/xml, text/xml",html:E,text:"text/plain"},crossDomain:!1,timeout:0},S.get=function(e,t){return S({url:e,success:t})},S.post=function(e,t,n,r){return"function"===F(t)&&(r=r||n,n=t,t=null),S({type:"POST",url:e,data:t,success:n,dataType:r})},S.getJSON=function(e,t){return S({url:e,success:t,dataType:"json"})};var A=encodeURIComponent},function(e,t,n){"use strict";function r(e,t,n,o){if(!(this instanceof r))return new r(t,n,o);var s=n||{};this.handle=o,this.name=o.name||"<anonymous>",this.params=void 0,this.path=void 0,this.method=e,this.regexp=i(t,this.keys=[],s),"/"===t&&s.end===!1&&(this.regexp.fast_slash=!0)}function o(e){if("string"!=typeof e||0===e.length)return e;try{return decodeURIComponent(e)}catch(t){throw t instanceof URIError&&(t.message="Failed to decode param '"+e+"'",t.status=t.statusCode=400),t}}var i=n(11),s=Object.prototype.hasOwnProperty;e.exports=r,r.prototype.handle_error=function(e,t,n,r){var o=this.handle;if(4!==o.length)return r(e);try{o(e,t,n,r)}catch(i){r(i)}},r.prototype.handle_request=function(e,t,n){var r=this.handle;if(r.length>3)return n();try{r(e,t,n)}catch(o){n(o)}},r.prototype.match=function(e){if(null==e)return this.params=void 0,this.path=void 0,!1;if(this.regexp.fast_slash)return this.params={},this.path="",!0;var t=this.regexp.exec(e);if(!t)return this.params=void 0,this.path=void 0,!1;this.params={},this.path=t[0];for(var n=this.keys,r=this.params,i=1;i<t.length;i++){var a=n[i-1],u=a.name,p=o(t[i]);void 0===p&&s.call(r,u)||(r[u]=p)}return!0}},function(e,t,n){"use strict";function r(e){var t=window[e+"Storage"],n={};if(t)for(var r in t)n[r]=t.getItem(r);return n}var o=n(3),i=n(1),s=n(2),a=e.exports=function(){this.href=null,this.query=null,this.params=null,this.path=null,this.search=null,this.method=null,this.referer=null,i.defineFreeze(this,"define",function(e,t){i.define(this,e,t)}),i.defineFreeze(this,"defineFreeze",function(e,t){i.defineFreeze(this,e,t)}),this.defineFreeze("paths",[]),this.init(),this.store=r("local"),this.session=r("session"),this.cookie=s.get()||{}};a.prototype.init=function(){this.href=(window.location.hash||"").replace(/^#/,"")||"/";var e=this.href.indexOf("?");e>-1?(this.path=this.href.substring(0,e),this.search=this.href.substring(e+1)):(this.path=this.href,this.search=""),this.path=this.path||"/",this.search.length?this.query=o.format(this.search):this.query={},this.method="active",-1==this.paths.indexOf(this.path)&&(this.method="load",this.paths.push(this.path));var t=window.location.search?window.location.search.replace(/^\?/,""):"";if(t){t=o.format(t);for(var n in t)this.query[n]=t[n];this.search=o.toString(this.query)}}},function(e,t,n){"use strict";function r(e){var t=document.body;document.title=e;var n=document.createElement("iframe");n.src="/favicon.ico",n.onload=function(){setTimeout(function(){n.parentNode.removeChild(n)},0)},t.appendChild(n)}function o(){for(var e,t,n,r=arguments,o=0;o<r.length;o++)switch(Object.prototype.toString.call(r[o])){case"[object Function]":n=r[o];break;case"[object Object]":t=r[o];break;case"[object String]":e=r[o]}t||(t={});var i=e.indexOf("?"),a=void 0,c=void 0;if(i>-1?(a=e.substring(0,i),c=e.substring(i+1)):(a=e.replace(/\?$/,""),c=""),c){var l=u.format(c);for(var f in l)t[f]||(t[f]=l[f])}var h=u.toString(t);return e=h.length?a+"?"+h:a,"function"!=typeof n?new p(function(t){s(e,t)}):void s(e,n)}var i=n(2),s=n(10),a=n(1),u=n(3),p=n(8).Promise,c=n(4),l=function(e){return{set:function(t,n){n=JSON.stringify(n),window.localStorage.setItem(t,n),e.http.request.store[t]=n},remove:function(t){e.http.request.store[t]&&(window.localStorage.removeItem(t),delete e.http.request.store[t])}}},f=function(e){return{set:function(t,n){n=JSON.stringify(n),window.sessionStorage.setItem(t,n),e.http.request.session[t]=n},remove:function(t){e.http.request.session[t]&&(window.sessionStorage.removeItem(t),delete e.http.request.session[t])}}},h=function(e){return{set:function(t,n){i.set(t,n),e.http.request.cookie[t]=n},remove:function(t){e.http.request.cookie[t]&&(i.remove(t),delete e.http.request.cookie[t])}}},d=e.exports=function(){a.defineFreeze(this,"define",function(e,t){a.define(this,e,t)}),a.defineFreeze(this,"defineFreeze",function(e,t){a.defineFreeze(this,e,t)}),this.defineFreeze("title",r),this.defineFreeze("cookie",h(this)),this.defineFreeze("jsonp",o),this.defineFreeze("store",l(this)),this.defineFreeze("session",f(this)),this.defineFreeze("ajax",c)};d.prototype.redirect=function(e){var t=this.http,n=t.request,r=this,o=this.http.namespace+"-history",i=n.session[o]||"[]";i=JSON.parse(i);var s=n.referer?i.indexOf(n.referer):-1,a=i.indexOf(e);-1==s?t.history="goahead":-1==a?t.history="goahead":a>s?t.history="goahead":s>a?t.history="retreat":t.history="quiescence",history.pushState({url:e},document.title,"#"+e),-1===i.indexOf(e)&&(i.push(e),this.session.set(o,i)),setTimeout(function(){n.init(),t.match(function(){n.referer=e,t.emit("redirected",n,r)})},0)}},function(e,t,n){var r;(function(e,o,i){/*!
		 * @overview es6-promise - a tiny implementation of Promises/A+.
		 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
		 * @license   Licensed under MIT license
		 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
		 * @version   3.0.2
		 */
(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function p(e){Y=e}function c(e){V=e}function l(){return function(){e.nextTick(m)}}function f(){return function(){W(m)}}function h(){var e=0,t=new ee(m),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=m,function(){e.port2.postMessage(0)}}function v(){return function(){setTimeout(m,1)}}function m(){for(var e=0;K>e;e+=2){var t=re[e],n=re[e+1];t(n),re[e]=void 0,re[e+1]=void 0}K=0}function g(){try{var e=n(18);return W=e.runOnLoop||e.runOnContext,f()}catch(t){return v()}}function y(){}function w(){return new TypeError("You cannot resolve a promise with itself")}function _(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return ae.error=t,ae}}function x(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function T(e,t,n){V(function(e){var r=!1,o=x(n,t,function(n){r||(r=!0,t!==n?L(e,n):S(e,n))},function(t){r||(r=!0,A(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,A(e,o))},e)}function C(e,t){t._state===ie?S(e,t._result):t._state===se?A(e,t._result):j(t,void 0,function(t){L(e,t)},function(t){A(e,t)})}function E(e,t){if(t.constructor===e.constructor)C(e,t);else{var n=b(t);n===ae?A(e,ae.error):void 0===n?S(e,t):a(n)?T(e,t,n):S(e,t)}}function L(e,t){e===t?A(e,w()):s(t)?E(e,t):S(e,t)}function F(e){e._onerror&&e._onerror(e._result),O(e)}function S(e,t){e._state===oe&&(e._result=t,e._state=ie,0!==e._subscribers.length&&V(O,e))}function A(e,t){e._state===oe&&(e._state=se,e._result=t,V(F,e))}function j(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+ie]=n,o[i+se]=r,0===i&&e._state&&V(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,o,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?I(n,r,o,i):o(i);e._subscribers.length=0}}function k(){this.error=null}function R(e,t){try{return e(t)}catch(n){return ue.error=n,ue}}function I(e,t,n,r){var o,i,s,u,p=a(n);if(p){if(o=R(n,r),o===ue?(u=!0,i=o.error,o=null):s=!0,t===o)return void A(t,_())}else o=r,s=!0;t._state!==oe||(p&&s?L(t,o):u?A(t,i):e===ie?S(t,o):e===se&&A(t,o))}function q(e,t){try{t(function(t){L(e,t)},function(t){A(e,t)})}catch(n){A(e,n)}}function P(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(y),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?S(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&S(n.promise,n._result))):A(n.promise,n._validationError())}function N(e){return new pe(this,e).promise}function B(e){function t(e){L(o,e)}function n(e){A(o,e)}var r=this,o=new r(y);if(!G(e))return A(o,new TypeError("You must pass an array to race.")),o;for(var i=e.length,s=0;o._state===oe&&i>s;s++)j(r.resolve(e[s]),void 0,t,n);return o}function M(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(y);return L(n,e),n}function U(e){var t=this,n=new t(y);return A(n,e),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function $(e){this._id=de++,this._state=void 0,this._result=void 0,this._subscribers=[],y!==e&&(a(e)||z(),this instanceof $||D(),q(this,e))}function J(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=ve)}var H;H=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var W,Y,X,G=H,K=0,V=({}.toString,function(e,t){re[K]=e,re[K+1]=t,K+=2,2===K&&(Y?Y(m):X())}),Z="undefined"!=typeof window?window:void 0,Q=Z||{},ee=Q.MutationObserver||Q.WebKitMutationObserver,te="undefined"!=typeof e&&"[object process]"==={}.toString.call(e),ne="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3);X=te?l():ee?h():ne?d():void 0===Z?g():v();var oe=void 0,ie=1,se=2,ae=new k,ue=new k;P.prototype._validateInput=function(e){return G(e)},P.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},P.prototype._init=function(){this._result=new Array(this.length)};var pe=P;P.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,o=0;n._state===oe&&t>o;o++)e._eachEntry(r[o],o)},P.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;u(e)?e.constructor===r&&e._state!==oe?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},P.prototype._settledAt=function(e,t,n){var r=this,o=r.promise;o._state===oe&&(r._remaining--,e===se?A(o,n):r._result[t]=n),0===r._remaining&&S(o,r._result)},P.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){n._settledAt(ie,t,e)},function(e){n._settledAt(se,t,e)})};var ce=N,le=B,fe=M,he=U,de=0,ve=$;$.all=ce,$.race=le,$.resolve=fe,$.reject=he,$._setScheduler=p,$._setAsap=c,$._asap=V,$.prototype={constructor:$,then:function(e,t){var n=this,r=n._state;if(r===ie&&!e||r===se&&!t)return this;var o=new this.constructor(y),i=n._result;if(r){var s=arguments[r-1];V(function(){I(r,o,s,i)})}else j(n,o,e,t);return o},"catch":function(e){return this.then(null,e)}};var me=J,ge={Promise:ve,polyfill:me};n(15).amd?(r=function(){return ge}.call(t,n,t,i),!(void 0!==r&&(i.exports=r))):"undefined"!=typeof i&&i.exports?i.exports=ge:"undefined"!=typeof this&&(this.ES6Promise=ge),me()}).call(this)}).call(t,n(17),function(){return this}(),n(16)(e))},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,a,u,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),u=1;o>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(i(n)){for(o=arguments.length,a=new Array(o-1),u=1;o>u;u++)a[u-1]=arguments[u];for(p=n.slice(),o=p.length,u=0;o>u;u++)p[u].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned){var o;o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},function(e,t){function n(e){for(var t="",n=0;e>n;n++){var o=Math.ceil(35*Math.random());t+=r[o]}return t}var r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],o=e.exports=function(e,t,r){r||(r="callback");var i=e.indexOf("?"),s="",a="",u="jsonp_"+(new Date).getTime()+"_"+n(10),p=null;i>-1?(a=e.substring(i),s=e.substring(0,i),e="?"===a?s+"?"+r+"="+u:s+a+"&"+r+"="+u):e=e+"?"+r+"="+u,window[u]=function(e){p=e},o.script(e,function(){setTimeout(function(){"function"==typeof t&&t(p)},0)})};o.script=function(e,t){var n=document.createElement("script"),r=window.document,o=r.head||r.getElementsByTagName("head")[0]||r.documentElement,i=o.getElementsByTagName("base")[0];n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n.onreadystatechange=null,"function"==typeof t&&t.call(this))},n.async=!0,n.src=e,i?o.insertBefore(n,i):o.appendChild(n)}},function(e,t,n){function r(e){for(var t,n=[],r=0,o=0,i="";null!=(t=m.exec(e));){var s=t[0],u=t[1],p=t.index;if(i+=e.slice(o,p),o=p+s.length,u)i+=u[1];else{i&&(n.push(i),i="");var c=t[2],l=t[3],f=t[4],h=t[5],d=t[6],v=t[7],g="+"===d||"*"===d,y="?"===d||"*"===d,w=c||"/",_=f||h||(v?".*":"[^"+w+"]+?");n.push({name:l||r++,prefix:c||"",delimiter:w,optional:y,repeat:g,pattern:a(_)})}}return o<e.length&&(i+=e.substr(o)),i&&n.push(i),n}function o(e){return i(r(e))}function i(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^"+e[n].pattern+"$"));return function(n){for(var r="",o=n||{},i=0;i<e.length;i++){var s=e[i];if("string"!=typeof s){var a,u=o[s.name];if(null==u){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to be defined')}if(v(u)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received "'+u+'"');if(0===u.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var p=0;p<u.length;p++){if(a=encodeURIComponent(u[p]),!t[i].test(a))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received "'+a+'"');r+=(0===p?s.prefix:s.delimiter)+a}}else{if(a=encodeURIComponent(u),!t[i].test(a))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+a+'"');r+=s.prefix+a}}else r+=s}return r}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function a(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function p(e){return e.sensitive?"":"i"}function c(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return u(e,t)}function l(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(d(e[o],t,n).source);var i=new RegExp("(?:"+r.join("|")+")",p(n));return u(i,t)}function f(e,t,n){for(var o=r(e),i=h(o,n),s=0;s<o.length;s++)"string"!=typeof o[s]&&t.push(o[s]);return u(i,t)}function h(e,t){t=t||{};for(var n=t.strict,r=t.end!==!1,o="",i=e[e.length-1],a="string"==typeof i&&/\/$/.test(i),u=0;u<e.length;u++){var c=e[u];if("string"==typeof c)o+=s(c);else{var l=s(c.prefix),f=c.pattern;c.repeat&&(f+="(?:"+l+f+")*"),f=c.optional?l?"(?:"+l+"("+f+"))?":"("+f+")?":l+"("+f+")",o+=f}}return n||(o=(a?o.slice(0,-2):o)+"(?:\\/(?=$))?"),o+=r?"$":n&&a?"":"(?=\\/|$)",new RegExp("^"+o,p(t))}function d(e,t,n){return t=t||[],v(t)?n||(n={}):(n=t,t=[]),e instanceof RegExp?c(e,t,n):v(e)?l(e,t,n):f(e,t,n)}var v=n(12);e.exports=d,e.exports.parse=r,e.exports.compile=o,e.exports.tokensToFunction=i,e.exports.tokensToRegExp=h;var m=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){t.type=function(e,t){var n=Object.prototype.toString.call(e).split(" ")[1].replace(/\]$/,"");return t?n==t:n},t.mixin=function(e,t,n){for(var r in t)e[r]?n&&(e[r]=t[r]):e[r]=t[r];return e}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){switch(n.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"==typeof e&&e&&"number"==typeof e.length)try{if("function"==typeof e.callee)return"arguments"}catch(t){if(t instanceof TypeError)return"arguments"}return null===e?"null":void 0===e?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":typeof e}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(){p=!1,s.length?u=s.concat(u):c=-1,u.length&&r()}function r(){if(!p){var e=setTimeout(n);p=!0;for(var t=u.length;t;){for(s=u,u=[];++c<t;)s&&s[c].run();c=-1,t=u.length}s=null,p=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var s,a=e.exports={},u=[],p=!1,c=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new o(e,t)),1!==u.length||p||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=i,a.addListener=i,a.once=i,a.off=i,a.removeListener=i,a.removeAllListeners=i,a.emit=i,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t){}])})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){!function(){Array.prototype.CSSClassIndexOf=Array.prototype.indexOf||function(e){for(var t=this.length,n=0;t>n;n++)if(this[n]===e)return n;return-1};var e="classList"in document.createElement("a"),t=Element.prototype;e?(t.hasClass||(t.hasClass=function(e){Array.prototype.slice.call(this.classList);e=e.split(" ");for(var t=0;t<e.length;t++)if(!this.classList.contains(e[t]))return!1;return!0}),t.addClass||(t.addClass=function(e){e=e.split(" ");for(var t=0;t<e.length;t++)this.hasClass(e[t])||this.classList.add(e[t]);return this}),t.removeClass||(t.removeClass=function(e){this.className.split(" ");e=e.split(" ");for(var t=0;t<e.length;t++)this.hasClass(e[t])&&this.classList.remove(e[t]);return this}),t.toggleClass||(t.toggleClass=function(e){e=e.split(" ");for(var t=0;t<e.length;t++)this.classList.toggle(e[t]);return this})):(t.hasClass||(t.hasClass=function(e){var t=this.className.split(" ");e=e.split(" ");for(var n=0;n<e.length;n++)if(-1===t.CSSClassIndexOf(e[n]))return!1;return!0}),t.addClass||(t.addClass=function(e){e=e.split(" ");for(var t=0;t<e.length;t++)this.hasClass(e[t])||(this.className=""!==this.className?this.className+" "+e[t]:e[t]);return this}),t.removeClass||(t.removeClass=function(e){var t=this.className.split(" ");e=e.split(" ");for(var n=0;n<e.length;n++)this.hasClass(e[n])&&t.splice(t.CSSClassIndexOf(e[n]),1);return this.className=t.join(" "),this}),t.toggleClass||(t.toggleClass=function(e){e=e.split(" ");for(var t=0;t<e.length;t++)this.hasClass(e[t])?this.removeClass(e[t]):this.addClass(e[t]);return this}));var n=NodeList.prototype;n.hasClass||(n.hasClass=function(e,t){void 0===t&&(t=!0);for(var n=this.length-1;n>=0;--n){var r=this[n].hasClass(e);if(t&&!r)return!1;if(!t&&r)return!0}return!0}),n.addClass||(n.addClass=function(e){for(var t=0;t<this.length;++t)this[t].addClass(e)}),n.removeClass||(n.removeClass=function(e){for(var t=0;t<this.length;++t)this[t].removeClass(e)}),n.toggleClass||(n.toggleClass=function(e){for(var t=0;t<this.length;++t)this[t].toggleClass(e)})}()},function(e,t,n){function r(e,t){return function(n){r.init(n),r.goahead(n,e),r.retreat(n,t),r.quiescence(n)}}function o(e){if(e.animate&&!e.data.header.hide){var t=e._headbar.wraproot,n=t.querySelector(".copier");n&&n.parentNode.removeChild(n);var r=e._headbar.wrapinner,o=r.cloneNode(!0);t.appendChild(o),o.addClass("copier");var i=r.querySelector(".webview-header-inner"),a=o;a.addClass("header-out-slide"),i.addClass("header-in-slide"),setTimeout(function(){s(i).then(function(e){i.setAttribute("class","webview-header-inner");var n=t.querySelector(".copier");n&&t.removeChild(n)}),a.addClass("header-slide header-out-slide-goahead"),i.addClass("header-slide header-in-slide-goahead")},0)}}function i(e){if(e.animate&&!e.data.header.hide){var t=e._headbar.wraproot,n=e._headbar.wrapinner,r=n.cloneNode(!0);t.insertBefore(r,n),r.addClass("copier");var o=n,i=r.querySelector(".webview-header-inner");i.addClass("header-back-out"),o.addClass("header-back-in"),setTimeout(function(){s(o).then(function(e){o.setAttribute("class","webview-header-outer");var n=t.querySelector(".copier");n&&t.removeChild(n)}),i.addClass("header-slide header-back-out-slide"),o.addClass("header-slide header-back-in-slide")},0)}}n(12);var s=n(14);e.exports=r;var a=["pt-page-moveToLeft,pt-page-moveFromRight","pt-page-moveToRight,pt-page-moveFromLeft","pt-page-moveToTop,pt-page-moveFromBottom","pt-page-moveToBottom,pt-page-moveFromTop","pt-page-fade,pt-page-moveFromRight pt-page-ontop","pt-page-fade,pt-page-moveFromLeft pt-page-ontop","pt-page-fade,pt-page-moveFromBottom pt-page-ontop","pt-page-fade,pt-page-moveFromTop pt-page-ontop","pt-page-moveToLeftFade,pt-page-moveFromRightFade","pt-page-moveToRightFade,pt-page-moveFromLeftFade","pt-page-moveToTopFade,pt-page-moveFromBottomFade","pt-page-moveToBottomFade,pt-page-moveFromTopFade","pt-page-moveToLeftEasing pt-page-ontop,pt-page-moveFromRight","pt-page-moveToRightEasing pt-page-ontop,pt-page-moveFromLeft","pt-page-moveToTopEasing pt-page-ontop,pt-page-moveFromBottom","pt-page-moveToBottomEasing pt-page-ontop,pt-page-moveFromTop","pt-page-scaleDown,pt-page-moveFromRight pt-page-ontop","pt-page-scaleDown,pt-page-moveFromLeft pt-page-ontop","pt-page-scaleDown,pt-page-moveFromBottom pt-page-ontop","pt-page-scaleDown,pt-page-moveFromTop pt-page-ontop","pt-page-scaleDown,pt-page-scaleUpDown pt-page-delay300","pt-page-scaleDownUp,pt-page-scaleUp pt-page-delay300","pt-page-moveToLeft pt-page-ontop,pt-page-scaleUp","pt-page-moveToRight pt-page-ontop,pt-page-scaleUp","pt-page-moveToTop pt-page-ontop,pt-page-scaleUp","pt-page-moveToBottom pt-page-ontop,pt-page-scaleUp","pt-page-scaleDownCenter,pt-page-scaleUpCenter pt-page-delay400","pt-page-rotateRightSideFirst,pt-page-moveFromRight pt-page-delay200 pt-page-ontop","pt-page-rotateLeftSideFirst,pt-page-moveFromLeft pt-page-delay200 pt-page-ontop","pt-page-rotateTopSideFirst,pt-page-moveFromTop pt-page-delay200 pt-page-ontop","pt-page-rotateBottomSideFirst,pt-page-moveFromBottom pt-page-delay200 pt-page-ontop","pt-page-flipOutRight,pt-page-flipInLeft pt-page-delay500","pt-page-flipOutLeft,pt-page-flipInRight pt-page-delay500","pt-page-flipOutTop,pt-page-flipInBottom pt-page-delay500","pt-page-flipOutBottom,pt-page-flipInTop pt-page-delay500","pt-page-rotateFall pt-page-ontop,pt-page-scaleUp","pt-page-rotateOutNewspaper,pt-page-rotateInNewspaper pt-page-delay500","pt-page-rotatePushLeft,pt-page-moveFromRight","pt-page-rotatePushRight,pt-page-moveFromLeft","pt-page-rotatePushTop,pt-page-moveFromBottom","pt-page-rotatePushBottom,pt-page-moveFromTop","pt-page-rotatePushLeft,pt-page-rotatePullRight pt-page-delay180","pt-page-rotatePushRight,pt-page-rotatePullLeft pt-page-delay180","pt-page-rotatePushTop,pt-page-rotatePullBottom pt-page-delay180","pt-page-rotatePushBottom,pt-page-rotatePullTop pt-page-delay180","pt-page-rotateFoldLeft,pt-page-moveFromRightFade","pt-page-rotateFoldRight,pt-page-moveFromLeftFade","pt-page-rotateFoldTop,pt-page-moveFromBottomFade","pt-page-rotateFoldBottom,pt-page-moveFromTopFade","pt-page-moveToRightFade,pt-page-rotateUnfoldLeft","pt-page-moveToLeftFade,pt-page-rotateUnfoldRight","pt-page-moveToBottomFade,pt-page-rotateUnfoldTop","pt-page-moveToTopFade,pt-page-rotateUnfoldBottom","pt-page-rotateRoomLeftOut pt-page-ontop,pt-page-rotateRoomLeftIn","pt-page-rotateRoomRightOut pt-page-ontop,pt-page-rotateRoomRightIn","pt-page-rotateRoomTopOut pt-page-ontop,pt-page-rotateRoomTopIn","pt-page-rotateRoomBottomOut pt-page-ontop,pt-page-rotateRoomBottomIn","pt-page-rotateCubeLeftOut pt-page-ontop,pt-page-rotateCubeLeftIn","pt-page-rotateCubeRightOut pt-page-ontop,pt-page-rotateCubeRightIn","pt-page-rotateCubeTopOut pt-page-ontop,pt-page-rotateCubeTopIn","pt-page-rotateCubeBottomOut pt-page-ontop,pt-page-rotateCubeBottomIn","pt-page-rotateCarouselLeftOut pt-page-ontop,pt-page-rotateCarouselLeftIn","pt-page-rotateCarouselRightOut pt-page-ontop,pt-page-rotateCarouselRightIn","pt-page-rotateCarouselTopOut pt-page-ontop,pt-page-rotateCarouselTopIn","pt-page-rotateCarouselBottomOut pt-page-ontop,pt-page-rotateCarouselBottomIn","pt-page-rotateSidesOut,pt-page-rotateSidesIn pt-page-delay200","pt-page-rotateSlideOut,pt-page-rotateSlideIn"];r.animating=!1,r.init=function(e){var t=e.views,n=Object.keys(t);if(!n.length)throw new Error("no webview, please add webview on page.");var r,o=e.views[n[0]].wraproot,i=n.length;for(r=o===document.body?document.body:o.parentNode,r.addClass("pt-perspective");i--;)t[n[i]].wraproot.addClass("pt-page")},r.goahead=function(e,t){var n=r.which(t);e.on("goahead",function(){if(!r.animating){r.animating=!0,o(e);var t=e.current,i=e.target;s(i.wraproot).then(function(n){t&&t.wraproot.setAttribute("class","pt-page webview hide"),i.wraproot.setAttribute("class","pt-page webview pt-page-current"),e.exchange(),r.animating=!1}),t&&t.wraproot.setAttribute("class","pt-page webview "+n[0]+" page-show"),i&&i.wraproot.setAttribute("class","pt-page webview pt-page-current "+n[1])}})},r.retreat=function(e,t){var n=r.which(t);e.on("retreat",function(){if(!r.animating){r.animating=!0,i(e);var t=e.current,o=e.target;s(o.wraproot).then(function(n){t&&t.wraproot.setAttribute("class","pt-page webview hide"),o.wraproot.setAttribute("class","pt-page webview pt-page-current"),e.exchange(),r.animating=!1}),t&&t.wraproot.setAttribute("class","pt-page webview "+n[0]+" page-show"),o&&o.wraproot.setAttribute("class","pt-page webview pt-page-current "+n[1])}})},r.quiescence=function(e){e.on("quiescence",function(){e.exchange()})},r.which=function(e){return a[e].split(",")}},function(e,t,n){function r(){function e(e){return Object.keys(e).filter(function(e){return e in t.style}).map(function(t){return e[t]})}var t=document.createElement("div"),n=[i,s].reduce(function(t,n){return t.concat(e(n))},[]);return n}var o=n(15).Promise,i={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},s={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"};e.exports=function(e,t){var n=r();return new o(function(r,o){function i(o){n.forEach(function(t){e.removeEventListener(t,i,!1)}),r(o),t&&t(o)}n.forEach(function(t){e.addEventListener(t,i,!1)})})}},function(e,t,n){var r;(function(e,o,i,s){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   2.3.0
	 */
(function(){"use strict";function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function p(e){return"object"==typeof e&&null!==e}function c(e){X=e}function l(e){Z=e}function f(){var t=e.nextTick,n=e.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(n)&&"0"===n[1]&&"10"===n[2]&&(t=o),function(){t(g)}}function h(){return function(){Y(g)}}function d(){var e=0,t=new te(g),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function v(){var e=new MessageChannel;return e.port1.onmessage=g,function(){e.port2.postMessage(0)}}function m(){return function(){setTimeout(g,1)}}function g(){for(var e=0;V>e;e+=2){var t=oe[e],n=oe[e+1];t(n),oe[e]=void 0,oe[e+1]=void 0}V=0}function y(){try{var e=n(16);return Y=e.runOnLoop||e.runOnContext,h()}catch(t){return m()}}function w(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function x(e){try{return e.then}catch(t){return ue.error=t,ue}}function T(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function C(e,t,n){Z(function(e){var r=!1,o=T(n,t,function(n){r||(r=!0,t!==n?F(e,n):A(e,n))},function(t){r||(r=!0,j(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,j(e,o))},e)}function E(e,t){t._state===se?A(e,t._result):t._state===ae?j(e,t._result):O(t,void 0,function(t){F(e,t)},function(t){j(e,t)})}function L(e,t){if(t.constructor===e.constructor)E(e,t);else{var n=x(t);n===ue?j(e,ue.error):void 0===n?A(e,t):u(n)?C(e,t,n):A(e,t)}}function F(e,t){e===t?j(e,_()):a(t)?L(e,t):A(e,t)}function S(e){e._onerror&&e._onerror(e._result),k(e)}function A(e,t){e._state===ie&&(e._result=t,e._state=se,0!==e._subscribers.length&&Z(k,e))}function j(e,t){e._state===ie&&(e._state=ae,e._result=t,Z(S,e))}function O(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+se]=n,o[i+ae]=r,0===i&&e._state&&Z(k,e)}function k(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,o,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?q(n,r,o,i):o(i);e._subscribers.length=0}}function R(){this.error=null}function I(e,t){try{return e(t)}catch(n){return pe.error=n,pe}}function q(e,t,n,r){var o,i,s,a,p=u(n);if(p){if(o=I(n,r),o===pe?(a=!0,i=o.error,o=null):s=!0,t===o)return void j(t,b())}else o=r,s=!0;t._state!==ie||(p&&s?F(t,o):a?j(t,i):e===se?A(t,o):e===ae&&j(t,o))}function P(e,t){try{t(function(t){F(e,t)},function(t){j(e,t)})}catch(n){j(e,n)}}function N(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(w),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?A(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&A(n.promise,n._result))):j(n.promise,n._validationError())}function B(e){return new ce(this,e).promise}function M(e){function t(e){F(o,e)}function n(e){j(o,e)}var r=this,o=new r(w);if(!K(e))return j(o,new TypeError("You must pass an array to race.")),o;for(var i=e.length,s=0;o._state===ie&&i>s;s++)O(r.resolve(e[s]),void 0,t,n);return o}function U(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(w);return F(n,e),n}function z(e){var t=this,n=new t(w);return j(n,e),n}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function J(e){this._id=ve++,this._state=void 0,this._result=void 0,this._subscribers=[],w!==e&&(u(e)||D(),this instanceof J||$(),P(this,e))}function H(){var e;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=me)}var W;W=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y,X,G,K=W,V=0,Z=({}.toString,function(e,t){oe[V]=e,oe[V+1]=t,V+=2,2===V&&(X?X(g):G())}),Q="undefined"!=typeof window?window:void 0,ee=Q||{},te=ee.MutationObserver||ee.WebKitMutationObserver,ne="undefined"!=typeof e&&"[object process]"==={}.toString.call(e),re="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,oe=new Array(1e3);G=ne?f():te?d():re?v():void 0===Q?y():m();var ie=void 0,se=1,ae=2,ue=new R,pe=new R;N.prototype._validateInput=function(e){return K(e)},N.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},N.prototype._init=function(){this._result=new Array(this.length)};var ce=N;N.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,o=0;n._state===ie&&t>o;o++)e._eachEntry(r[o],o)},N.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;p(e)?e.constructor===r&&e._state!==ie?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},N.prototype._settledAt=function(e,t,n){var r=this,o=r.promise;o._state===ie&&(r._remaining--,e===ae?j(o,n):r._result[t]=n),0===r._remaining&&A(o,r._result)},N.prototype._willSettleAt=function(e,t){var n=this;O(e,void 0,function(e){n._settledAt(se,t,e)},function(e){n._settledAt(ae,t,e)})};var le=B,fe=M,he=U,de=z,ve=0,me=J;J.all=le,J.race=fe,J.resolve=he,J.reject=de,J._setScheduler=c,J._setAsap=l,J._asap=Z,J.prototype={constructor:J,then:function(e,t){var n=this,r=n._state;if(r===se&&!e||r===ae&&!t)return this;var o=new this.constructor(w),i=n._result;if(r){var s=arguments[r-1];Z(function(){q(r,o,s,i)})}else O(n,o,e,t);return o},"catch":function(e){return this.then(null,e)}};var ge=H,ye={Promise:me,polyfill:ge};n(10).amd?(r=function(){return ye}.call(t,n,t,s),!(void 0!==r&&(s.exports=r))):"undefined"!=typeof s&&s.exports?s.exports=ye:"undefined"!=typeof this&&(this.ES6Promise=ye),ge()}).call(this)}).call(t,n(2),n(1).setImmediate,function(){return this}(),n(11)(e))},function(e,t){}])});